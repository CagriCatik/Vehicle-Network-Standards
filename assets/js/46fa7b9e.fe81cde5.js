"use strict";(self.webpackChunkvns=self.webpackChunkvns||[]).push([[27003],{37484:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>a});const i=JSON.parse('{"id":"DoIP/DoIP_Message/doip-uds-diagnoseinformationen","title":"DoIP mit UDS-Diagnoseinformation","description":"Das DoIP-Protokoll (Diagnostics over Internet Protocol) erm\xf6glicht die \xdcbertragung von UDS-Diagnoseinformationen (Unified Diagnostic Services) \xfcber IP-basierte Netzwerke. Diese Kommunikation erfolgt zwischen einem Diagnosetester und einem Zielger\xe4t (ECU), indem UDS-Diagnosebotschaften in die DoIP-Nachrichten eingebettet werden.","source":"@site/docs/DoIP/05_DoIP_Message/06_doip-uds-diagnoseinformationen.md","sourceDirName":"DoIP/05_DoIP_Message","slug":"/DoIP/DoIP_Message/doip-uds-diagnoseinformationen","permalink":"/Vehicle-Network-Standards/docs/DoIP/DoIP_Message/doip-uds-diagnoseinformationen","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DoIP/05_DoIP_Message/06_doip-uds-diagnoseinformationen.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{},"sidebar":"doipSidebar","previous":{"title":"Routing Activation Response","permalink":"/Vehicle-Network-Standards/docs/DoIP/DoIP_Message/routing-activation-response"},"next":{"title":"Anwendung in CANoe","permalink":"/Vehicle-Network-Standards/docs/category/anwendung-in-canoe"}}');var r=s(74848),d=s(28453);const t={},o="DoIP mit UDS-Diagnoseinformation",l={},a=[{value:"Nachrichtenstruktur",id:"nachrichtenstruktur",level:2},{value:"Beschreibung der Felder",id:"beschreibung-der-felder",level:2},{value:"<strong>Protocol Version</strong>",id:"protocol-version",level:3},{value:"<strong>Inverse Protocol Version</strong>",id:"inverse-protocol-version",level:3},{value:"<strong>Payload Type</strong>",id:"payload-type",level:3},{value:"<strong>Payload Length</strong>",id:"payload-length",level:3},{value:"<strong>Logical Source Address</strong>",id:"logical-source-address",level:3},{value:"<strong>Logical Target Address</strong>",id:"logical-target-address",level:3},{value:"<strong>User Data</strong>",id:"user-data",level:3},{value:"Beispiel f\xfcr eine UDS-Diagnosebotschaft",id:"beispiel-f\xfcr-eine-uds-diagnosebotschaft",level:2},{value:"UDS-Dienst: <code>ReadDataByIdentifier</code>",id:"uds-dienst-readdatabyidentifier",level:3},{value:"Ablauf der DoIP-Nachricht mit UDS-Diagnoseinformation",id:"ablauf-der-doip-nachricht-mit-uds-diagnoseinformation",level:2},{value:"Beispielnachrichten",id:"beispielnachrichten",level:2},{value:"Diagnoseanfrage: <code>ReadDataByIdentifier</code>",id:"diagnoseanfrage-readdatabyidentifier",level:3},{value:"Diagnoseantwort: Sensordaten",id:"diagnoseantwort-sensordaten",level:3},{value:"Relevante Codebeispiele",id:"relevante-codebeispiele",level:2},{value:"Beispiel: Senden einer Diagnoseanfrage",id:"beispiel-senden-einer-diagnoseanfrage",level:3},{value:"H\xe4ufige Probleme und L\xf6sungen",id:"h\xe4ufige-probleme-und-l\xf6sungen",level:2},{value:"Problem 1: Keine Antwort von der ECU",id:"problem-1-keine-antwort-von-der-ecu",level:3},{value:"Problem 2: Falscher Payload Type",id:"problem-2-falscher-payload-type",level:3},{value:"Problem 3: Zeit\xfcberschreitung",id:"problem-3-zeit\xfcberschreitung",level:3}];function c(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"doip-mit-uds-diagnoseinformation",children:"DoIP mit UDS-Diagnoseinformation"})}),"\n",(0,r.jsx)(n.p,{children:"Das DoIP-Protokoll (Diagnostics over Internet Protocol) erm\xf6glicht die \xdcbertragung von UDS-Diagnoseinformationen (Unified Diagnostic Services) \xfcber IP-basierte Netzwerke. Diese Kommunikation erfolgt zwischen einem Diagnosetester und einem Zielger\xe4t (ECU), indem UDS-Diagnosebotschaften in die DoIP-Nachrichten eingebettet werden."}),"\n",(0,r.jsx)(n.h2,{id:"nachrichtenstruktur",children:"Nachrichtenstruktur"}),"\n",(0,r.jsx)(n.p,{children:"Die DoIP-Nachricht mit UDS-Diagnoseinformation besteht aus folgenden Feldern:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feld"}),(0,r.jsx)(n.th,{children:"L\xe4nge"}),(0,r.jsx)(n.th,{children:"Beschreibung"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Protocol Version"})}),(0,r.jsx)(n.td,{children:"1 Byte"}),(0,r.jsx)(n.td,{children:"Version des verwendeten DoIP-Protokolls."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Inverse Protocol Version"})}),(0,r.jsx)(n.td,{children:"1 Byte"}),(0,r.jsx)(n.td,{children:"Sicherheitspr\xfcfung (Komplement der Protokollversion)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Payload Type"})}),(0,r.jsx)(n.td,{children:"2 Bytes"}),(0,r.jsxs)(n.td,{children:["Typ der Nachricht (z. B. ",(0,r.jsx)(n.code,{children:"0x8001"})," f\xfcr Diagnoseanfrage)."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Payload Length"})}),(0,r.jsx)(n.td,{children:"4 Bytes"}),(0,r.jsx)(n.td,{children:"L\xe4nge des Nutzdatenfeldes in Bytes."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Logical Source Address"})}),(0,r.jsx)(n.td,{children:"2 Bytes"}),(0,r.jsx)(n.td,{children:"Logische Adresse des Diagnosetesters."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"Logical Target Address"})}),(0,r.jsx)(n.td,{children:"2 Bytes"}),(0,r.jsx)(n.td,{children:"Logische Adresse des Zielger\xe4ts (ECU)."})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"User Data"})}),(0,r.jsx)(n.td,{children:"Variabel"}),(0,r.jsx)(n.td,{children:"Enth\xe4lt die UDS-Diagnoseinformationen, wie SID und DID."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"beschreibung-der-felder",children:"Beschreibung der Felder"}),"\n",(0,r.jsx)(n.h3,{id:"protocol-version",children:(0,r.jsx)(n.strong,{children:"Protocol Version"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": 1 Byte."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Gibt die Version des DoIP-Protokolls an."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),": ",(0,r.jsx)(n.code,{children:"0x02"})," (Version 2)."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"inverse-protocol-version",children:(0,r.jsx)(n.strong,{children:"Inverse Protocol Version"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": 1 Byte."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Sicherheitspr\xfcfung, die die Inverse der Protokollversion darstellt."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),": ",(0,r.jsx)(n.code,{children:"0xFD"})," (Komplement von ",(0,r.jsx)(n.code,{children:"0x02"}),")."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"payload-type",children:(0,r.jsx)(n.strong,{children:"Payload Type"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": 2 Bytes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Bestimmt die Art der Diagnoseinformation."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beispiele"}),":","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0x8001"}),": Diagnoseanfrage (Diagnostic Request)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"0x8002"}),": Diagnoseantwort (Diagnostic Response)."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"payload-length",children:(0,r.jsx)(n.strong,{children:"Payload Length"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": 4 Bytes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Gibt die L\xe4nge des Nutzdatenfeldes (Payload) in Bytes an."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),": ",(0,r.jsx)(n.code,{children:"0x00000008"})," (8 Bytes)."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"logical-source-address",children:(0,r.jsx)(n.strong,{children:"Logical Source Address"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": 2 Bytes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Die logische Adresse des Diagnosetesters, der die Anfrage sendet."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),": ",(0,r.jsx)(n.code,{children:"0x0203"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"logical-target-address",children:(0,r.jsx)(n.strong,{children:"Logical Target Address"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": 2 Bytes."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Die logische Adresse des Zielger\xe4ts (ECU), an das die Diagnoseanfrage gerichtet ist."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beispiel"}),": ",(0,r.jsx)(n.code,{children:"0x0201"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"user-data",children:(0,r.jsx)(n.strong,{children:"User Data"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xe4nge"}),": Variabel (abh\xe4ngig vom UDS-Dienst)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Beschreibung"}),": Enth\xe4lt die UDS-Diagnoseinformationen, z. B.:","\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"SID (Service Identifier)"}),": Gibt den UDS-Dienst an, z. B. ",(0,r.jsx)(n.code,{children:"0x22"})," f\xfcr ",(0,r.jsx)(n.code,{children:"ReadDataByIdentifier"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"DID (Data Identifier)"}),": Gibt die angeforderten Daten an, z. B. ",(0,r.jsx)(n.code,{children:"0x1234"})," f\xfcr spezifische Fahrzeugdaten."]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"beispiel-f\xfcr-eine-uds-diagnosebotschaft",children:"Beispiel f\xfcr eine UDS-Diagnosebotschaft"}),"\n",(0,r.jsxs)(n.h3,{id:"uds-dienst-readdatabyidentifier",children:["UDS-Dienst: ",(0,r.jsx)(n.code,{children:"ReadDataByIdentifier"})]}),"\n",(0,r.jsx)(n.p,{children:"Eine Diagnoseanfrage, die Sensordaten oder Fahrzeuginformationen abruft."}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Feld"}),(0,r.jsx)(n.th,{children:"Beispielwert"}),(0,r.jsx)(n.th,{children:"Beschreibung"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"SID (Service Identifier)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0x22"})}),(0,r.jsxs)(n.td,{children:["UDS-Dienst: ",(0,r.jsx)(n.code,{children:"ReadDataByIdentifier"}),"."]})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.strong,{children:"DID (Data Identifier)"})}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"0x1234"})}),(0,r.jsx)(n.td,{children:"Angeforderte Daten, z. B. Fahrzeugstatus."})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"ablauf-der-doip-nachricht-mit-uds-diagnoseinformation",children:"Ablauf der DoIP-Nachricht mit UDS-Diagnoseinformation"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Erstellen der Diagnoseanfrage"}),":",(0,r.jsx)(n.br,{}),"\n","Der Diagnosetester formuliert eine UDS-Diagnoseanfrage (z. B. ",(0,r.jsx)(n.code,{children:"ReadDataByIdentifier"}),") und f\xfcgt diese in das User Data-Feld der DoIP-Nachricht ein."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Senden der Nachricht"}),":",(0,r.jsx)(n.br,{}),"\n","Die DoIP-Nachricht wird \xfcber das Netzwerk an das Gateway oder die Ziel-ECU gesendet."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Verarbeitung durch die ECU"}),":",(0,r.jsx)(n.br,{}),"\n","Die ECU verarbeitet die Diagnoseanfrage und generiert eine entsprechende Antwort (z. B. angeforderte Sensordaten)."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Antwort an den Tester"}),":",(0,r.jsx)(n.br,{}),"\n","Die Diagnoseantwort wird vom Gateway zur\xfcck an den Diagnosetester gesendet."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"beispielnachrichten",children:"Beispielnachrichten"}),"\n",(0,r.jsxs)(n.h3,{id:"diagnoseanfrage-readdatabyidentifier",children:["Diagnoseanfrage: ",(0,r.jsx)(n.code,{children:"ReadDataByIdentifier"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Protocol Version: 0x02\nInverse Protocol Version: 0xFD\nPayload Type: 0x8001\nPayload Length: 8 Bytes\nLogical Source Address: 0x0203\nLogical Target Address: 0x0201\nUser Data: 0x22 0x12 0x34\n"})}),"\n",(0,r.jsx)(n.h3,{id:"diagnoseantwort-sensordaten",children:"Diagnoseantwort: Sensordaten"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-plaintext",children:"Protocol Version: 0x02\nInverse Protocol Version: 0xFD\nPayload Type: 0x8002\nPayload Length: 8 Bytes\nLogical Source Address: 0x0201\nLogical Target Address: 0x0203\nUser Data: 0x62 0x12 0x34 0x56 0x78\n"})}),"\n",(0,r.jsx)(n.h2,{id:"relevante-codebeispiele",children:"Relevante Codebeispiele"}),"\n",(0,r.jsx)(n.h3,{id:"beispiel-senden-einer-diagnoseanfrage",children:"Beispiel: Senden einer Diagnoseanfrage"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'import socket\n\n# Verbindungsparameter\ngateway_ip = "192.168.1.2"\ngateway_port = 13400\n\n# DoIP-Nachricht erstellen\nrequest = bytearray([\n    0x02, 0xFD,             # Protokollversion und Inverse Version\n    0x80, 0x01,             # Payload Type (Diagnoseanfrage)\n    0x00, 0x00, 0x00, 0x08, # Payload L\xe4nge (8 Bytes)\n    0x02, 0x03,             # Logical Source Address (Diagnosetester)\n    0x02, 0x01,             # Logical Target Address (Ziel-ECU)\n    0x22, 0x12, 0x34        # UDS-Daten: SID (0x22) und DID (0x1234)\n])\n\n# Nachricht senden und Antwort empfangen\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n    s.connect((gateway_ip, gateway_port))\n    s.send(request)\n    response = s.recv(1024)\n\nprint("Empfangene Antwort:", response.hex())\n'})}),"\n",(0,r.jsx)(n.h2,{id:"h\xe4ufige-probleme-und-l\xf6sungen",children:"H\xe4ufige Probleme und L\xf6sungen"}),"\n",(0,r.jsx)(n.h3,{id:"problem-1-keine-antwort-von-der-ecu",children:"Problem 1: Keine Antwort von der ECU"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ursache"}),": Die Zieladresse ist falsch oder die ECU unterst\xfctzt den angeforderten UDS-Dienst nicht."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xf6sung"}),": \xdcberpr\xfcfen Sie die logische Zieladresse und den verwendeten UDS-Dienst."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"problem-2-falscher-payload-type",children:"Problem 2: Falscher Payload Type"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ursache"}),": Der Payload Type stimmt nicht mit der Art der Nachricht \xfcberein."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xf6sung"}),": Stellen Sie sicher, dass der Payload Type korrekt definiert ist (z. B. ",(0,r.jsx)(n.code,{children:"0x8001"})," f\xfcr Anfragen)."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"problem-3-zeit\xfcberschreitung",children:"Problem 3: Zeit\xfcberschreitung"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Ursache"}),": Die ECU reagiert nicht rechtzeitig."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"L\xf6sung"}),": Erh\xf6hen Sie den Timeout-Wert oder \xfcberpr\xfcfen Sie die ECU auf Fehler."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},28453:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>o});var i=s(96540);const r={},d=i.createContext(r);function t(e){const n=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(d.Provider,{value:n},e.children)}}}]);