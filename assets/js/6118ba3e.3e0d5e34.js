"use strict";(self.webpackChunkvns=self.webpackChunkvns||[]).push([[39292],{75417:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>o,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"DoIP/DoIP_Message/protokollinformation-doip","title":"Protokollinformation f\xfcr DoIP","description":"Diagnostics over Internet Protocol (DoIP) ist ein standardisiertes Kommunikationsprotokoll, das Diagnoseanfragen und -antworten zwischen einem Tester und Fahrzeugsteuerger\xe4ten (ECUs) \xfcber IP-basierte Netzwerke erm\xf6glicht. Es basiert auf den ISO-Standards 13400-2 und 13400-3 und wird verwendet, um Fahrzeugdiagnosen \xfcber Ethernet effizient und zuverl\xe4ssig durchzuf\xfchren.","source":"@site/docs/DoIP/05_DoIP_Message/01_protokollinformation-doip.md","sourceDirName":"DoIP/05_DoIP_Message","slug":"/DoIP/DoIP_Message/protokollinformation-doip","permalink":"/Vehicle-Network-Standards/docs/DoIP/DoIP_Message/protokollinformation-doip","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/DoIP/05_DoIP_Message/01_protokollinformation-doip.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{},"sidebar":"doipSidebar","previous":{"title":"DoIP Message","permalink":"/Vehicle-Network-Standards/docs/category/doip-message"},"next":{"title":"Vehicle Announcement / Vehicle Identification Response","permalink":"/Vehicle-Network-Standards/docs/DoIP/DoIP_Message/vehicle-announcement"}}');var s=i(74848),t=i(28453);const l={},d="Protokollinformation f\xfcr DoIP",o={},a=[{value:"Grundlegende Merkmale von DoIP",id:"grundlegende-merkmale-von-doip",level:2},{value:"1. Kommunikationsstruktur",id:"1-kommunikationsstruktur",level:3},{value:"2. Adressierung",id:"2-adressierung",level:3},{value:"3. Transportprotokolle",id:"3-transportprotokolle",level:3},{value:"DoIP-Nachrichtenstruktur",id:"doip-nachrichtenstruktur",level:2},{value:"1. Generelle Struktur",id:"1-generelle-struktur",level:3},{value:"2. Wichtige Payload-Typen",id:"2-wichtige-payload-typen",level:3},{value:"Ablauf einer typischen DoIP-Kommunikation",id:"ablauf-einer-typischen-doip-kommunikation",level:2},{value:"1. Fahrzeugerkennung (Vehicle Announcement)",id:"1-fahrzeugerkennung-vehicle-announcement",level:3},{value:"2. Routing-Aktivierung (Routing Activation)",id:"2-routing-aktivierung-routing-activation",level:3},{value:"3. Diagnosekommunikation",id:"3-diagnosekommunikation",level:3},{value:"Sicherheitsaspekte",id:"sicherheitsaspekte",level:2},{value:"1. Authentifizierung",id:"1-authentifizierung",level:3},{value:"2. Verschl\xfcsselung",id:"2-verschl\xfcsselung",level:3},{value:"3. Zugriffskontrolle",id:"3-zugriffskontrolle",level:3},{value:"Netzwerkkonfiguration",id:"netzwerkkonfiguration",level:2},{value:"1. Physikalische Verbindung",id:"1-physikalische-verbindung",level:3},{value:"2. IP-Adressierung",id:"2-ip-adressierung",level:3},{value:"Vorteile von DoIP",id:"vorteile-von-doip",level:2},{value:"Relevante Codebeispiele",id:"relevante-codebeispiele",level:2},{value:"Beispiel 1: Senden einer DoIP-Diagnoseanfrage",id:"beispiel-1-senden-einer-doip-diagnoseanfrage",level:3},{value:"H\xe4ufige Probleme und L\xf6sungen",id:"h\xe4ufige-probleme-und-l\xf6sungen",level:2},{value:"Problem 1: Keine Antwort vom Gateway",id:"problem-1-keine-antwort-vom-gateway",level:3},{value:"Problem 2: Zeit\xfcberschreitung bei Diagnoseanfragen",id:"problem-2-zeit\xfcberschreitung-bei-diagnoseanfragen",level:3},{value:"Problem 3: Falsche DoIP-Nachricht",id:"problem-3-falsche-doip-nachricht",level:3}];function h(e){const n={br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"protokollinformation-f\xfcr-doip",children:"Protokollinformation f\xfcr DoIP"})}),"\n",(0,s.jsx)(n.p,{children:"Diagnostics over Internet Protocol (DoIP) ist ein standardisiertes Kommunikationsprotokoll, das Diagnoseanfragen und -antworten zwischen einem Tester und Fahrzeugsteuerger\xe4ten (ECUs) \xfcber IP-basierte Netzwerke erm\xf6glicht. Es basiert auf den ISO-Standards 13400-2 und 13400-3 und wird verwendet, um Fahrzeugdiagnosen \xfcber Ethernet effizient und zuverl\xe4ssig durchzuf\xfchren."}),"\n",(0,s.jsx)(n.h2,{id:"grundlegende-merkmale-von-doip",children:"Grundlegende Merkmale von DoIP"}),"\n",(0,s.jsx)(n.h3,{id:"1-kommunikationsstruktur",children:"1. Kommunikationsstruktur"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Client-Server-Modell"}),":",(0,s.jsx)(n.br,{}),"\n","Der Diagnosetester fungiert als Client, der Anfragen stellt, w\xe4hrend das Gateway als Server agiert, das Anfragen verarbeitet und weiterleitet."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Einsatz von Ethernet und TCP/IP"}),":",(0,s.jsx)(n.br,{}),"\n","DoIP nutzt Ethernet f\xfcr die physische Verbindung und TCP/IP f\xfcr die Daten\xfcbertragung."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-adressierung",children:"2. Adressierung"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Logische Adressen"}),":",(0,s.jsx)(n.br,{}),"\n","Jeder Teilnehmer (Tester, Gateway, ECU) erh\xe4lt eine eindeutige logische Adresse:","\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Tester: z. B. ",(0,s.jsx)(n.code,{children:"0x203"})]}),"\n",(0,s.jsxs)(n.li,{children:["Gateway: z. B. ",(0,s.jsx)(n.code,{children:"0x201"})]}),"\n",(0,s.jsxs)(n.li,{children:["ECU: z. B. ",(0,s.jsx)(n.code,{children:"0x205"})]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"MAC-Adressen und IP-Adressen"}),":",(0,s.jsx)(n.br,{}),"\n","Die Kommunikation erfolgt \xfcber MAC- und IP-Adressen, die den physischen Netzwerkadaptern zugewiesen sind."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-transportprotokolle",children:"3. Transportprotokolle"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TCP (Transmission Control Protocol)"}),":",(0,s.jsx)(n.br,{}),"\n","Verwendet f\xfcr verl\xe4ssliche Diagnoseanfragen und -antworten."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"UDP (User Datagram Protocol)"}),":",(0,s.jsx)(n.br,{}),"\n","Wird f\xfcr die Erkennung (Discovery) von Steuerger\xe4ten im Netzwerk genutzt."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"doip-nachrichtenstruktur",children:"DoIP-Nachrichtenstruktur"}),"\n",(0,s.jsx)(n.h3,{id:"1-generelle-struktur",children:"1. Generelle Struktur"}),"\n",(0,s.jsx)(n.p,{children:"Jede DoIP-Nachricht besteht aus mehreren Abschnitten, die die Kommunikation eindeutig identifizieren und steuern:"}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{children:"Feld"}),(0,s.jsx)(n.th,{children:"L\xe4nge"}),(0,s.jsx)(n.th,{children:"Beschreibung"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Protokoll-ID"})}),(0,s.jsx)(n.td,{children:"2 Bytes"}),(0,s.jsx)(n.td,{children:"Identifiziert DoIP (0xFE 0xCE)."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Payload-Type"})}),(0,s.jsx)(n.td,{children:"2 Bytes"}),(0,s.jsx)(n.td,{children:"Typ der Nachricht (z. B. Diagnoseanfrage)."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Payload-L\xe4nge"})}),(0,s.jsx)(n.td,{children:"4 Bytes"}),(0,s.jsx)(n.td,{children:"L\xe4nge des Nutzdatenfeldes in Bytes."})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:(0,s.jsx)(n.strong,{children:"Nutzdaten (Payload)"})}),(0,s.jsx)(n.td,{children:"Variabel"}),(0,s.jsx)(n.td,{children:"Die eigentlichen Diagnose- oder Steuerdaten."})]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"2-wichtige-payload-typen",children:"2. Wichtige Payload-Typen"}),"\n",(0,s.jsx)(n.p,{children:"Die wichtigsten Payload-Typen sind im ISO-Standard definiert und bestimmen die Art der Nachricht:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0x0003"}),": Vehicle Announcement (Fahrzeugerkennung)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0x0005"}),": Routing Activation Request (Aktivierung von Netzwerken)."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0x8001"}),": Diagnoseanfrage."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"0x8002"}),": Diagnoseantwort."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"ablauf-einer-typischen-doip-kommunikation",children:"Ablauf einer typischen DoIP-Kommunikation"}),"\n",(0,s.jsx)(n.h3,{id:"1-fahrzeugerkennung-vehicle-announcement",children:"1. Fahrzeugerkennung (Vehicle Announcement)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Das Fahrzeug (Gateway) sendet eine ",(0,s.jsx)(n.strong,{children:"Vehicle Announcement-Nachricht"}),", um dem Tester seine Erreichbarkeit mitzuteilen."]}),"\n",(0,s.jsxs)(n.li,{children:["Nachrichtentyp: ",(0,s.jsx)(n.code,{children:"0x0003"})]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-routing-aktivierung-routing-activation",children:"2. Routing-Aktivierung (Routing Activation)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Der Tester sendet eine ",(0,s.jsx)(n.strong,{children:"Routing Activation Request"}),", um die nachgelagerten Netzwerke im Fahrzeug zu aktivieren."]}),"\n",(0,s.jsxs)(n.li,{children:["Nachrichtentyp: ",(0,s.jsx)(n.code,{children:"0x0005"})]}),"\n",(0,s.jsxs)(n.li,{children:["Das Gateway antwortet mit einer ",(0,s.jsx)(n.strong,{children:"Routing Activation Response"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"3-diagnosekommunikation",children:"3. Diagnosekommunikation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Der Tester stellt eine ",(0,s.jsx)(n.strong,{children:"Diagnoseanfrage (Diagnostic Request)"})," an die Ziel-ECU \xfcber das Gateway."]}),"\n",(0,s.jsxs)(n.li,{children:["Nachrichtentyp: ",(0,s.jsx)(n.code,{children:"0x8001"})]}),"\n",(0,s.jsxs)(n.li,{children:["Die ECU verarbeitet die Anfrage und sendet die ",(0,s.jsx)(n.strong,{children:"Diagnoseantwort (Diagnostic Response)"})," zur\xfcck."]}),"\n",(0,s.jsxs)(n.li,{children:["Nachrichtentyp: ",(0,s.jsx)(n.code,{children:"0x8002"})]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"sicherheitsaspekte",children:"Sicherheitsaspekte"}),"\n",(0,s.jsx)(n.h3,{id:"1-authentifizierung",children:"1. Authentifizierung"}),"\n",(0,s.jsx)(n.p,{children:"DoIP unterst\xfctzt Mechanismen zur Authentifizierung des Testers, um sicherzustellen, dass nur autorisierte Ger\xe4te Zugriff auf die Fahrzeugsteuerger\xe4te erhalten."}),"\n",(0,s.jsx)(n.h3,{id:"2-verschl\xfcsselung",children:"2. Verschl\xfcsselung"}),"\n",(0,s.jsx)(n.p,{children:"Um die Sicherheit der Kommunikation zu gew\xe4hrleisten, k\xf6nnen DoIP-Nachrichten mit Verschl\xfcsselungstechnologien wie TLS (Transport Layer Security) gesichert werden."}),"\n",(0,s.jsx)(n.h3,{id:"3-zugriffskontrolle",children:"3. Zugriffskontrolle"}),"\n",(0,s.jsx)(n.p,{children:"Die Zielsteuerger\xe4te k\xf6nnen nur auf autorisierte Anfragen reagieren, basierend auf:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Sicherheitslevel."}),"\n",(0,s.jsx)(n.li,{children:"Berechtigungsdaten."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"netzwerkkonfiguration",children:"Netzwerkkonfiguration"}),"\n",(0,s.jsx)(n.h3,{id:"1-physikalische-verbindung",children:"1. Physikalische Verbindung"}),"\n",(0,s.jsx)(n.p,{children:"DoIP verwendet Ethernet als physische Verbindung:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Typischerweise 100BASE-T1 (Single-Pair Ethernet)."}),"\n",(0,s.jsx)(n.li,{children:"Alternativ: Standard-Ethernet (z. B. 100BASE-TX)."}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"2-ip-adressierung",children:"2. IP-Adressierung"}),"\n",(0,s.jsx)(n.p,{children:"DoIP unterst\xfctzt sowohl IPv4 als auch IPv6:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"IPv4-Subnetztyp"}),": 192.168.x.x/24"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Portnummern"}),": Standardm\xe4\xdfig ",(0,s.jsx)(n.code,{children:"13400"})," f\xfcr TCP und UDP."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"vorteile-von-doip",children:"Vorteile von DoIP"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"H\xf6here Geschwindigkeit"}),":",(0,s.jsx)(n.br,{}),"\n","Durch den Einsatz von Ethernet ist DoIP deutlich schneller als traditionelle Diagnoseprotokolle wie CAN oder LIN."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Erweiterte Netzwerke"}),":",(0,s.jsx)(n.br,{}),"\n","DoIP erm\xf6glicht den Zugriff auf komplexe Fahrzeugnetzwerke \xfcber ein zentrales Gateway."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Zukunftssicherheit"}),":",(0,s.jsx)(n.br,{}),"\n","Dank der Unterst\xfctzung moderner Netzwerktechnologien ist DoIP ein skalierbarer Standard."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"relevante-codebeispiele",children:"Relevante Codebeispiele"}),"\n",(0,s.jsx)(n.h3,{id:"beispiel-1-senden-einer-doip-diagnoseanfrage",children:"Beispiel 1: Senden einer DoIP-Diagnoseanfrage"}),"\n",(0,s.jsx)(n.p,{children:"Das folgende Python-Skript zeigt, wie eine DoIP-Nachricht mit Diagnoseanfrage erstellt und gesendet wird:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-python",children:'import socket\n\n# Verbindungsparameter\ngateway_ip = "192.168.1.2"\ngateway_port = 13400\n\n# DoIP-Nachricht erstellen\ndiagnostic_request = bytearray([\n    0xFE, 0xCE,             # Protokoll-ID\n    0x80, 0x01,             # Payload-Type (Diagnoseanfrage)\n    0x00, 0x00, 0x00, 0x06, # Payload-L\xe4nge (6 Bytes)\n    0x22, 0x12, 0x34,       # UDS: ReadDataByIdentifier (SID: 0x22, DID: 0x1234)\n])\n\n# Verbindung herstellen und Nachricht senden\nwith socket.socket(socket.AF_INET, socket.SOCK_STREAM) as s:\n    s.connect((gateway_ip, gateway_port))\n    s.send(diagnostic_request)\n    response = s.recv(1024)\n\nprint("Empfangene Antwort:", response.hex())\n'})}),"\n",(0,s.jsx)(n.h2,{id:"h\xe4ufige-probleme-und-l\xf6sungen",children:"H\xe4ufige Probleme und L\xf6sungen"}),"\n",(0,s.jsx)(n.h3,{id:"problem-1-keine-antwort-vom-gateway",children:"Problem 1: Keine Antwort vom Gateway"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ursache"}),": Das Gateway ist nicht erreichbar."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"L\xf6sung"}),": \xdcberpr\xfcfen Sie die IP-Konfiguration und die physische Verbindung."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-2-zeit\xfcberschreitung-bei-diagnoseanfragen",children:"Problem 2: Zeit\xfcberschreitung bei Diagnoseanfragen"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ursache"}),": Die Ziel-ECU reagiert nicht rechtzeitig."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"L\xf6sung"}),": Erh\xf6hen Sie den Timeout-Wert oder pr\xfcfen Sie die ECU auf Fehler."]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"problem-3-falsche-doip-nachricht",children:"Problem 3: Falsche DoIP-Nachricht"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ursache"}),": Fehlerhafte Struktur oder ung\xfcltiger Payload-Type."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"L\xf6sung"}),": \xdcberpr\xfcfen Sie die Nachricht gem\xe4\xdf ISO 13400-2."]}),"\n"]})]})}function c(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},28453:(e,n,i)=>{i.d(n,{R:()=>l,x:()=>d});var r=i(96540);const s={},t=r.createContext(s);function l(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(t.Provider,{value:n},e.children)}}}]);