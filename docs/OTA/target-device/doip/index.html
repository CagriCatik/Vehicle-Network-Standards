<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-OTA/target-device/doip" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">UDS over Ethernet | Vehicle Network Standards</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://CagriCatik.github.io/Vehicle-Network-Standards/docs/OTA/target-device/doip"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="UDS over Ethernet | Vehicle Network Standards"><meta data-rh="true" name="description" content="Unified Diagnostic Services (UDS) is a standardized communication protocol defined by ISO 14229, widely used in automotive systems for diagnostics and vehicle control. Implementing UDS over Ethernet leverages the high-speed and flexible nature of Ethernet networks to facilitate efficient and robust communication between external diagnostic tools and the vehicle&#x27;s Electronic Control Units (ECUs). This documentation provides an in-depth exploration of UDS over Ethernet, detailing its integration within the AUTOSAR architecture, connection establishment processes, message framing, payload structures, and practical considerations for advanced diagnostics and data transfer operations."><meta data-rh="true" property="og:description" content="Unified Diagnostic Services (UDS) is a standardized communication protocol defined by ISO 14229, widely used in automotive systems for diagnostics and vehicle control. Implementing UDS over Ethernet leverages the high-speed and flexible nature of Ethernet networks to facilitate efficient and robust communication between external diagnostic tools and the vehicle&#x27;s Electronic Control Units (ECUs). This documentation provides an in-depth exploration of UDS over Ethernet, detailing its integration within the AUTOSAR architecture, connection establishment processes, message framing, payload structures, and practical considerations for advanced diagnostics and data transfer operations."><link data-rh="true" rel="icon" href="/Vehicle-Network-Standards/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://CagriCatik.github.io/Vehicle-Network-Standards/docs/OTA/target-device/doip"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/Vehicle-Network-Standards/docs/OTA/target-device/doip" hreflang="en"><link data-rh="true" rel="alternate" href="https://CagriCatik.github.io/Vehicle-Network-Standards/docs/OTA/target-device/doip" hreflang="x-default"><link rel="alternate" type="application/rss+xml" href="/Vehicle-Network-Standards/blog/rss.xml" title="Vehicle Network Standards RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/Vehicle-Network-Standards/blog/atom.xml" title="Vehicle Network Standards Atom Feed"><link rel="stylesheet" href="/Vehicle-Network-Standards/assets/css/styles.c959825f.css">
<script src="/Vehicle-Network-Standards/assets/js/runtime~main.a8b55af5.js" defer="defer"></script>
<script src="/Vehicle-Network-Standards/assets/js/main.e916155a.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/Vehicle-Network-Standards/img/car.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Vehicle-Network-Standards/"><div class="navbar__logo"><img src="/Vehicle-Network-Standards/img/car.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/Vehicle-Network-Standards/img/car.svg" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">VNS</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/AUTOSAR/getting_started">AUTOSAR</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/SOVA/getting_started">SOVA</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/SOVD/getting_started">SOVD</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/UDS/getting_started">UDS</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/CAN/getting_started">CAN</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/LIN/getting_started">LIN</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/FLEXRAY/getting_started">FlexRay</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/ETHERNET/getting_started">Ethernet</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/DoIP/getting_started">DoIP</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/SOME-IP/getting_started">SOME/IP</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/XCP/getting_started">XCP</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/SecOC/getting_started">SecOC</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/category/funktionale-sicherheit">ISO26262</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/docs/FMEA/introduction">FMEA</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/Vehicle-Network-Standards/docs/OTA/getting-.started">OTA</a><a class="navbar__item navbar__link" href="/Vehicle-Network-Standards/blog">Blog</a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/Vehicle-Network-Standards/docs/OTA/getting-.started">Getting Started</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/introduction-1">Introduction</a><button aria-label="Expand sidebar category &#x27;Introduction&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/core-architecture">Core Architecture</a><button aria-label="Expand sidebar category &#x27;Core Architecture&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/ota-backend">OTA Backend</a><button aria-label="Expand sidebar category &#x27;OTA Backend&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/user-experience">User Experience</a><button aria-label="Expand sidebar category &#x27;User Experience&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/backend---tcu">Backend - TCU</a><button aria-label="Expand sidebar category &#x27;Backend - TCU&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/tcu">TCU</a><button aria-label="Expand sidebar category &#x27;TCU&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/Vehicle-Network-Standards/docs/category/target-device">Target Device</a><button aria-label="Collapse sidebar category &#x27;Target Device&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/uds-can-eth">UDS over CAN vs. UDS over Ethernet in Automotive OTA Update Systems</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/autosar">Diagnostics over Ethernet and CAN in AUTOSAR</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/uds-can">UDS over CAN</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/doip">UDS over Ethernet</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/doip-external">DoIP - Connection to External Tester</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/bootloader">Bootloader in Electronic Control Units</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/target-device-memory">Target Device Memory in OTA Updates</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Vehicle-Network-Standards/docs/OTA/target-device/fail-safe-strategy">Fail Safe Strategy in OTA Updates</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/testing">Testing</a><button aria-label="Expand sidebar category &#x27;Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/use-case">Use Case</a><button aria-label="Expand sidebar category &#x27;Use Case&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/remote-diagnostics">Remote Diagnostics</a><button aria-label="Expand sidebar category &#x27;Remote Diagnostics&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/possible-attacks">Possible Attacks</a><button aria-label="Expand sidebar category &#x27;Possible Attacks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/measures">Measures</a><button aria-label="Expand sidebar category &#x27;Measures&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/sdv">SDV</a><button aria-label="Expand sidebar category &#x27;SDV&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/qa">Q&amp;A</a><button aria-label="Expand sidebar category &#x27;Q&amp;A&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/Vehicle-Network-Standards/docs/category/sums">SUMS</a><button aria-label="Expand sidebar category &#x27;SUMS&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/Vehicle-Network-Standards/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/Vehicle-Network-Standards/docs/category/target-device"><span itemprop="name">Target Device</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">UDS over Ethernet</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>UDS over Ethernet</h1></header>
<p>Unified Diagnostic Services (UDS) is a standardized communication protocol defined by ISO 14229, widely used in automotive systems for diagnostics and vehicle control. Implementing UDS over Ethernet leverages the high-speed and flexible nature of Ethernet networks to facilitate efficient and robust communication between external diagnostic tools and the vehicle&#x27;s Electronic Control Units (ECUs). This documentation provides an in-depth exploration of UDS over Ethernet, detailing its integration within the AUTOSAR architecture, connection establishment processes, message framing, payload structures, and practical considerations for advanced diagnostics and data transfer operations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="autosar-architecture-integration">AUTOSAR Architecture Integration<a href="#autosar-architecture-integration" class="hash-link" aria-label="Direct link to AUTOSAR Architecture Integration" title="Direct link to AUTOSAR Architecture Integration">​</a></h2>
<p>AUTOSAR (AUTomotive Open System ARchitecture) provides a standardized framework for automotive software architecture, ensuring interoperability and scalability across various vehicle platforms. Within the AUTOSAR architecture, UDS over Ethernet is integrated as part of the diagnostic and communication services, enabling seamless interaction between diagnostic tools and ECUs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="component-placement">Component Placement<a href="#component-placement" class="hash-link" aria-label="Direct link to Component Placement" title="Direct link to Component Placement">​</a></h3>
<ul>
<li><strong>Diagnostic Communication Manager (DCM):</strong> The DCM handles UDS services, managing the diagnostic sessions, security access, and data transmission.</li>
<li><strong>Ethernet Interface:</strong> Facilitates the physical and data link layer communication over Ethernet, interfacing with the vehicle&#x27;s network.</li>
<li><strong>Operating System (OS):</strong> Manages task scheduling and resource allocation for handling diagnostic requests and responses.</li>
<li><strong>ECU Abstraction Layer:</strong> Provides a standardized interface between the DCM and the underlying ECU hardware, ensuring consistency across different ECUs.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="integration-overview">Integration Overview<a href="#integration-overview" class="hash-link" aria-label="Direct link to Integration Overview" title="Direct link to Integration Overview">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|        Application        |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      (Diagnostic Tools)   |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             | Ethernet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------v--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|     Diagnostic Communication Manager (DCM)     |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             | Ethernet Interface</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------v--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|       AUTOSAR ECU Abstraction Layer              |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------+--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             | ECU-specific Drivers</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+------------v--------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|             ECU Hardware                         |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This structure ensures that UDS over Ethernet operates efficiently within the AUTOSAR framework, facilitating robust diagnostic communication across the vehicle&#x27;s network.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="connection-establishment">Connection Establishment<a href="#connection-establishment" class="hash-link" aria-label="Direct link to Connection Establishment" title="Direct link to Connection Establishment">​</a></h2>
<p>Establishing a connection for UDS over Ethernet involves several key steps to ensure secure and reliable communication between the diagnostic tool and the vehicle&#x27;s ECUs.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="protocols-udp-and-tcp">Protocols: UDP and TCP<a href="#protocols-udp-and-tcp" class="hash-link" aria-label="Direct link to Protocols: UDP and TCP" title="Direct link to Protocols: UDP and TCP">​</a></h3>
<p>UDS over Ethernet can utilize both UDP (User Datagram Protocol) and TCP (Transmission Control Protocol) for data transmission, each offering distinct advantages:</p>
<ul>
<li><strong>UDP:</strong>
<ul>
<li><strong>Pros:</strong> Lower latency, simpler implementation, suitable for real-time diagnostics.</li>
<li><strong>Cons:</strong> No built-in reliability, potential for packet loss.</li>
</ul>
</li>
<li><strong>TCP:</strong>
<ul>
<li><strong>Pros:</strong> Reliable data transmission with error checking and retransmission mechanisms.</li>
<li><strong>Cons:</strong> Higher latency due to connection establishment and error handling overhead.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-establishment-steps">Connection Establishment Steps<a href="#connection-establishment-steps" class="hash-link" aria-label="Direct link to Connection Establishment Steps" title="Direct link to Connection Establishment Steps">​</a></h3>
<ol>
<li>
<p><strong>Discovery Phase:</strong></p>
<ul>
<li><strong>Broadcasting:</strong> The diagnostic tool broadcasts a discovery message to identify available ECUs on the network.</li>
<li><strong>ECU Response:</strong> ECUs respond with their identification information, including IP addresses and supported services.</li>
</ul>
</li>
<li>
<p><strong>Session Initialization:</strong></p>
<ul>
<li><strong>Session Request:</strong> The diagnostic tool initiates a diagnostic session by sending a session initiation request to the target ECU.</li>
<li><strong>Session Acknowledgment:</strong> The ECU acknowledges the session request, establishing a communication channel.</li>
</ul>
</li>
<li>
<p><strong>Security Access (Optional):</strong></p>
<ul>
<li><strong>Security Challenge:</strong> For sensitive operations, the ECU may issue a security challenge.</li>
<li><strong>Security Response:</strong> The diagnostic tool responds with the appropriate security credentials to gain access.</li>
</ul>
</li>
<li>
<p><strong>Data Transfer Setup:</strong></p>
<ul>
<li><strong>Protocol Configuration:</strong> Both the diagnostic tool and ECU agree on communication parameters, such as block size and separation time.</li>
<li><strong>Flow Control Initialization:</strong> Flow control mechanisms are established to manage data transmission rates and ensure reliable delivery.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-connection-sequence">Example Connection Sequence<a href="#example-connection-sequence" class="hash-link" aria-label="Direct link to Example Connection Sequence" title="Direct link to Example Connection Sequence">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Diagnostic Tool                    ECU</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |--- Discovery Broadcast ----&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |&lt;--- ECU Response -----------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |--- Session Initiation -----&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |&lt;--- Session Acknowledgment -|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |--- Security Challenge ------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |&lt;--- Security Response -------|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |--- Data Transfer Setup ------&gt;|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |&lt;--- Flow Control Initialization -|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |                             |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       |----- Diagnostic Operations -----&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This sequence ensures a secure and synchronized communication channel between the diagnostic tool and the ECU, facilitating effective diagnostic operations.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ethernet-frame-structure-for-uds">Ethernet Frame Structure for UDS<a href="#ethernet-frame-structure-for-uds" class="hash-link" aria-label="Direct link to Ethernet Frame Structure for UDS" title="Direct link to Ethernet Frame Structure for UDS">​</a></h2>
<p>UDS over Ethernet utilizes standard Ethernet frame structures augmented with specific fields to support diagnostic communication. Understanding the Ethernet frame composition is crucial for interpreting and constructing diagnostic messages.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="standard-ethernet-frame-components">Standard Ethernet Frame Components<a href="#standard-ethernet-frame-components" class="hash-link" aria-label="Direct link to Standard Ethernet Frame Components" title="Direct link to Standard Ethernet Frame Components">​</a></h3>
<ol>
<li>
<p><strong>Ethernet Header:</strong></p>
<ul>
<li><strong>Destination MAC Address (6 bytes):</strong> Identifies the receiving device.</li>
<li><strong>Source MAC Address (6 bytes):</strong> Identifies the sending device.</li>
<li><strong>EtherType (2 bytes):</strong> Indicates the protocol encapsulated in the payload (e.g., IPv4, IPv6, or custom protocols).</li>
</ul>
</li>
<li>
<p><strong>Payload:</strong></p>
<ul>
<li><strong>Protocol Header (TCP/UDP):</strong> Contains source and destination ports, sequence numbers, and other protocol-specific information.</li>
<li><strong>Type Field:</strong> Specifies the UDS protocol version and payload details.</li>
<li><strong>CRC (4 bytes):</strong> Cyclic Redundancy Check for error detection.</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="enhanced-uds-frame-structure">Enhanced UDS Frame Structure<a href="#enhanced-uds-frame-structure" class="hash-link" aria-label="Direct link to Enhanced UDS Frame Structure" title="Direct link to Enhanced UDS Frame Structure">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------------+----------------+---------+------------------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Destination MAC| Source MAC     | EtherType| Protocol Header  | CRC    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------+----------------+---------+------------------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      6 bytes   |     6 bytes     | 2 bytes | Variable (TCP/UDP)| 4 bytes|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------+----------------+---------+------------------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                           Payload (Type, Data)                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-field-composition">Type Field Composition<a href="#type-field-composition" class="hash-link" aria-label="Direct link to Type Field Composition" title="Direct link to Type Field Composition">​</a></h3>
<p>The Type field within the payload contains critical information for UDS communication:</p>
<ol>
<li><strong>Protocol Version (1 byte):</strong> Indicates the version of the UDS protocol being used.</li>
<li><strong>Inverse Protocol Version (1 byte):</strong> Bitwise inverse of the Protocol Version for verification purposes.</li>
<li><strong>Payload Type (2 bytes):</strong> Defines the specific diagnostic service or message type.</li>
<li><strong>Payload Length (2 bytes):</strong> Specifies the length of the Type Payload in bytes, excluding the generic Type header.</li>
<li><strong>Type Payload (Variable):</strong> Contains detailed information such as source and target addresses and user data.</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="detailed-type-field-breakdown">Detailed Type Field Breakdown<a href="#detailed-type-field-breakdown" class="hash-link" aria-label="Direct link to Detailed Type Field Breakdown" title="Direct link to Detailed Type Field Breakdown">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Protocol Version| Inverse Protocol Version| Payload Type  | Payload Length |   Type Payload    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      1 byte     |          1 byte         |   2 bytes     |    2 bytes      | Variable Length  |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Protocol Version (Byte 0):</strong> A single byte indicating the UDS protocol version (e.g., <code>0x02</code>).</li>
<li><strong>Inverse Protocol Version (Byte 1):</strong> A single byte representing the bitwise inverse of the Protocol Version (e.g., <code>0xFD</code> for <code>0x02</code>).</li>
<li><strong>Payload Type (Bytes 2-3):</strong> Two bytes identifying the specific diagnostic message type (e.g., <code>0x0001</code> for Vehicle Identification Request).</li>
<li><strong>Payload Length (Bytes 4-5):</strong> Two bytes indicating the length of the Type Payload in bytes.</li>
<li><strong>Type Payload (Bytes 6 onwards):</strong> Contains the source address, target address, and user data relevant to the diagnostic operation.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="payload-type-specifications">Payload Type Specifications<a href="#payload-type-specifications" class="hash-link" aria-label="Direct link to Payload Type Specifications" title="Direct link to Payload Type Specifications">​</a></h2>
<p>The Payload Type field is pivotal in distinguishing between various diagnostic messages and services. Each Payload Type value corresponds to a specific diagnostic function as defined in the UDS specifications.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="common-payload-types">Common Payload Types<a href="#common-payload-types" class="hash-link" aria-label="Direct link to Common Payload Types" title="Direct link to Common Payload Types">​</a></h3>
<table><thead><tr><th>Payload Type</th><th>Description</th></tr></thead><tbody><tr><td><code>0x0000</code></td><td>Generic Type Header</td></tr><tr><td><code>0x0001</code></td><td>Vehicle Identification Request</td></tr><tr><td><code>0x0002</code></td><td>Vehicle Identification via Message ID Entity ID</td></tr><tr><td><code>0x0003</code></td><td>Vehicle Identification Request with VIN Number</td></tr><tr><td><code>0x0004</code></td><td>Vehicle Announcement Message</td></tr><tr><td><code>0x0005</code></td><td>Routing Activation Request</td></tr><tr><td><code>0x0008</code></td><td>Active Alive Check Response</td></tr><tr><td><code>0x8001</code></td><td>Diagnostic Message</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="payload-type-details">Payload Type Details<a href="#payload-type-details" class="hash-link" aria-label="Direct link to Payload Type Details" title="Direct link to Payload Type Details">​</a></h3>
<ul>
<li><strong><code>0x0000</code> - Generic Type Header:</strong>
<ul>
<li>Used for standard communication without specific diagnostic functions.</li>
</ul>
</li>
<li><strong><code>0x0001</code> - Vehicle Identification Request:</strong>
<ul>
<li>Initiates a request to retrieve the vehicle&#x27;s identification information.</li>
</ul>
</li>
<li><strong><code>0x0002</code> - Vehicle Identification via Message ID Entity ID:</strong>
<ul>
<li>Requests vehicle identification based on specific Message ID and Entity ID parameters.</li>
</ul>
</li>
<li><strong><code>0x0003</code> - Vehicle Identification Request with VIN Number:</strong>
<ul>
<li>Retrieves the Vehicle Identification Number (VIN) for detailed vehicle identification.</li>
</ul>
</li>
<li><strong><code>0x0004</code> - Vehicle Announcement Message:</strong>
<ul>
<li>Announces the presence of a vehicle or ECU on the network.</li>
</ul>
</li>
<li><strong><code>0x0005</code> - Routing Activation Request:</strong>
<ul>
<li>Requests activation of routing for specific diagnostic services or ECUs.</li>
</ul>
</li>
<li><strong><code>0x0008</code> - Active Alive Check Response:</strong>
<ul>
<li>Confirms the active status of a diagnostic session or ECU.</li>
</ul>
</li>
<li><strong><code>0x8001</code> - Diagnostic Message:</strong>
<ul>
<li>Represents standard UDS diagnostic messages, including service requests and responses.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-payload-type-identification">Example Payload Type Identification<a href="#example-payload-type-identification" class="hash-link" aria-label="Direct link to Example Payload Type Identification" title="Direct link to Example Payload Type Identification">​</a></h3>
<p>Diagnostic tools like Wireshark can capture Ethernet frames and display the Payload Type, enabling engineers to identify and analyze specific diagnostic messages.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Frame Capture Example:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Source Address: 00:1A:2B:3C:4D:5E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Destination Address: 5E:4D:3C:2B:1A:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EtherType: 0x88F7 (Custom UDS Protocol)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Protocol Version: 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Inverse Protocol Version: 0xFD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Type: 0x8001</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Length: 0x0014</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type Payload: [User Data]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CRC: 0xA1B2C3D4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example:</p>
<ul>
<li>The Payload Type <code>0x8001</code> indicates a Diagnostic Message.</li>
<li>The Diagnostic Message contains user data pertinent to the diagnostic operation.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="message-framing-and-structure">Message Framing and Structure<a href="#message-framing-and-structure" class="hash-link" aria-label="Direct link to Message Framing and Structure" title="Direct link to Message Framing and Structure">​</a></h2>
<p>Effective communication using UDS over Ethernet relies on well-defined message framing and structure. Each diagnostic message adheres to a specific format to ensure accurate interpretation and processing by the receiving ECU.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ethernet-frame-example">Ethernet Frame Example<a href="#ethernet-frame-example" class="hash-link" aria-label="Direct link to Ethernet Frame Example" title="Direct link to Ethernet Frame Example">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+----------------+----------------+---------+------------------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Destination MAC| Source MAC     | EtherType| Protocol Header  | CRC    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------+----------------+---------+------------------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      6 bytes   |     6 bytes     | 2 bytes | Variable (TCP/UDP)| 4 bytes|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+----------------+----------------+---------+------------------+--------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|                           Payload (Type, Data)                      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+---------------------------------------------------------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="type-field-example">Type Field Example<a href="#type-field-example" class="hash-link" aria-label="Direct link to Type Field Example" title="Direct link to Type Field Example">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Type Field Data:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Protocol Version| Inverse Protocol Version| Payload Type  | Payload Length |   Type Payload    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      0x02       |          0xFD           |   0x8001      |    0x0014      | [User Data]       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="diagnostic-message-example">Diagnostic Message Example<a href="#diagnostic-message-example" class="hash-link" aria-label="Direct link to Diagnostic Message Example" title="Direct link to Diagnostic Message Example">​</a></h3>
<p>Consider a diagnostic session initiation response captured from an Ethernet frame:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Protocol Version: 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Inverse Protocol Version: 0xFD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Type: 0x8001 (Diagnostic Message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Length: 0x0014 (20 bytes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Source Address: 0x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Target Address: 0x14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - User Data: [Extended Session Diagnostic Response]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this example:</p>
<ul>
<li>The Protocol Version <code>0x02</code> and its inverse <code>0xFD</code> ensure message integrity.</li>
<li>The Payload Type <code>0x8001</code> identifies the message as a Diagnostic Message.</li>
<li>The Payload Length <code>0x0014</code> indicates the size of the Type Payload.</li>
<li>The Type Payload contains specific diagnostic information, such as session responses.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="payload-type-handling">Payload Type Handling<a href="#payload-type-handling" class="hash-link" aria-label="Direct link to Payload Type Handling" title="Direct link to Payload Type Handling">​</a></h2>
<p>Efficient handling of different Payload Types is essential for robust diagnostic communication. Each Payload Type requires specific processing logic to interpret and respond appropriately.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-vehicle-identification-request-0x0001">Example: Vehicle Identification Request (<code>0x0001</code>)<a href="#example-vehicle-identification-request-0x0001" class="hash-link" aria-label="Direct link to example-vehicle-identification-request-0x0001" title="Direct link to example-vehicle-identification-request-0x0001">​</a></h3>
<p><strong>Message Structure:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Protocol Version| Inverse Protocol Version| Payload Type  | Payload Length |   Type Payload    |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      0x02       |          0xFD           |   0x0001      |    0x0004      | [User Data]       |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-------------------------+---------------+----------------+------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>Type Payload:</strong></p>
<ul>
<li><strong>Source Address (1 byte):</strong> Identifier of the diagnostic tool.</li>
<li><strong>Target Address (1 byte):</strong> Identifier of the ECU.</li>
<li><strong>Additional Data (2 bytes):</strong> Specific parameters for the request.</li>
</ul>
<p><strong>Processing Logic:</strong></p>
<ol>
<li>
<p><strong>Receive Message:</strong></p>
<ul>
<li>Validate Protocol Version and its inverse.</li>
<li>Identify Payload Type <code>0x0001</code>.</li>
</ul>
</li>
<li>
<p><strong>Interpret Payload:</strong></p>
<ul>
<li>Extract Source and Target Addresses.</li>
<li>Retrieve Vehicle Identification Information based on request parameters.</li>
</ul>
</li>
<li>
<p><strong>Construct Response:</strong></p>
<ul>
<li>Populate Type Payload with Vehicle Identification Number (VIN) and other relevant data.</li>
<li>Set appropriate Payload Type for the response (e.g., <code>0x8001</code>).</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-response-message">Example Response Message<a href="#example-response-message" class="hash-link" aria-label="Direct link to Example Response Message" title="Direct link to Example Response Message">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Protocol Version: 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Inverse Protocol Version: 0xFD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Type: 0x8001 (Diagnostic Message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Length: 0x0014 (20 bytes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Source Address: 0x14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Target Address: 0x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - User Data: [VIN and Identification Data]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="practical-example-diagnostic-session-handling">Practical Example: Diagnostic Session Handling<a href="#practical-example-diagnostic-session-handling" class="hash-link" aria-label="Direct link to Practical Example: Diagnostic Session Handling" title="Direct link to Practical Example: Diagnostic Session Handling">​</a></h2>
<p>Consider a diagnostic session where the diagnostic tool initiates a session and receives an extended session diagnostic response from the ECU.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="frame-capture-analysis">Frame Capture Analysis<a href="#frame-capture-analysis" class="hash-link" aria-label="Direct link to Frame Capture Analysis" title="Direct link to Frame Capture Analysis">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">Captured Ethernet Frame:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Source Address: 00:1A:2B:3C:4D:5E</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Destination Address: 5E:4D:3C:2B:1A:00</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">EtherType: 0x88F7 (Custom UDS Protocol)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Protocol Version: 0x02</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Inverse Protocol Version: 0xFD</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Type: 0x8001 (Diagnostic Message)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Payload Length: 0x0014 (20 bytes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  Type Payload:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Source Address: 0x14</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - Target Address: 0x01</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    - User Data: [Extended Session Diagnostic Response]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">CRC: 0xA1B2C3D4</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">----------------------------------------------------</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="message-interpretation">Message Interpretation<a href="#message-interpretation" class="hash-link" aria-label="Direct link to Message Interpretation" title="Direct link to Message Interpretation">​</a></h3>
<ul>
<li><strong>Protocol Version and Inverse:</strong> Ensures message integrity (<code>0x02</code> and <code>0xFD</code>).</li>
<li><strong>Payload Type (<code>0x8001</code>):</strong> Indicates a Diagnostic Message.</li>
<li><strong>Payload Length (<code>0x0014</code>):</strong> Specifies the length of the Type Payload.</li>
<li><strong>Type Payload:</strong>
<ul>
<li><strong>Source Address (<code>0x14</code>):</strong> ECU identifier responding to the request.</li>
<li><strong>Target Address (<code>0x01</code>):</strong> Diagnostic tool identifier.</li>
<li><strong>User Data:</strong> Contains the Extended Session Diagnostic Response, providing session-specific information.</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="extended-session-diagnostic-response">Extended Session Diagnostic Response<a href="#extended-session-diagnostic-response" class="hash-link" aria-label="Direct link to Extended Session Diagnostic Response" title="Direct link to Extended Session Diagnostic Response">​</a></h3>
<p>The User Data segment within the Type Payload includes details pertinent to the diagnostic session, such as session type, security access level, and supported services.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">User Data Structure:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">| Session Type    | Security Level  | Supported Services|</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-----------------+------------------+</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">|      1 byte     |      1 byte      |    Variable      |</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">+-----------------+-----------------+------------------+</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li><strong>Session Type:</strong> Specifies the type of diagnostic session initiated (e.g., extended session).</li>
<li><strong>Security Level:</strong> Indicates the required security access level for further diagnostic operations.</li>
<li><strong>Supported Services:</strong> Lists the UDS services supported by the ECU within the session.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="code-snippets">Code Snippets<a href="#code-snippets" class="hash-link" aria-label="Direct link to Code Snippets" title="Direct link to Code Snippets">​</a></h2>
<p>While the transcript does not provide explicit code examples, the following pseudocode demonstrates handling UDS over Ethernet communication based on the discussed principles. These snippets illustrate constructing and parsing Ethernet frames for UDS diagnostics.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sending-a-vehicle-identification-request">Sending a Vehicle Identification Request<a href="#sending-a-vehicle-identification-request" class="hash-link" aria-label="Direct link to Sending a Vehicle Identification Request" title="Direct link to Sending a Vehicle Identification Request">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_vehicle_identification_request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target_address</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Construct Type Payload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type_payload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        source_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Source Address (1 byte)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target_address</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Target Address (1 byte)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token number" style="color:#36acaa">0x00</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x01</span><span class="token plain">           </span><span class="token comment" style="color:#999988;font-style:italic"># Additional Data (2 bytes) for Payload Type 0x0001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Construct Type Field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x02</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inverse_protocol_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">~</span><span class="token plain">protocol_version </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xFF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payload_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x0001</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payload_length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">len</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">type_payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type_field </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        protocol_version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        inverse_protocol_version</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload_type </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xFF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        payload_type </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xFF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload_length </span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xFF</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        payload_length </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xFF</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> type_payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Construct Ethernet Frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ethernet_frame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;destination_mac&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;5E:4D:3C:2B:1A:00&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;source_mac&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;00:1A:2B:3C:4D:5E&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;ethertype&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x88F7</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> type_field</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    send_ethernet_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ethernet_frame</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="handling-a-diagnostic-message-response">Handling a Diagnostic Message Response<a href="#handling-a-diagnostic-message-response" class="hash-link" aria-label="Direct link to Handling a Diagnostic Message Response" title="Direct link to Handling a Diagnostic Message Response">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handle_diagnostic_message_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">received_frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> received_frame</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Parse Type Field</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    inverse_protocol_version </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payload_type </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">3</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payload_length </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;&lt;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">8</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">|</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">5</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type_payload </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">6</span><span class="token punctuation" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">6</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> payload_length</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Validate Protocol Version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> inverse_protocol_version </span><span class="token operator" style="color:#393A34">!=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">~</span><span class="token plain">protocol_version </span><span class="token operator" style="color:#393A34">&amp;</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0xFF</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">raise</span><span class="token plain"> ValueError</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Invalid Protocol Version Inversion&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Identify Payload Type</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">if</span><span class="token plain"> payload_type </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x8001</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Diagnostic Message</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        source_address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> type_payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target_address </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> type_payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        user_data </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> type_payload</span><span class="token punctuation" style="color:#393A34">[</span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Process User Data (Extended Session Response)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        process_extended_session_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">user_data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">else</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic"># Handle Other Payload Types</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        handle_other_payload_types</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">payload_type</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> type_payload</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="constructing-an-ethernet-frame">Constructing an Ethernet Frame<a href="#constructing-an-ethernet-frame" class="hash-link" aria-label="Direct link to Constructing an Ethernet Frame" title="Direct link to Constructing an Ethernet Frame">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">construct_ethernet_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">destination_mac</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> source_mac</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> ethertype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> payload</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    frame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;destination_mac&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> destination_mac</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;source_mac&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> source_mac</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;ethertype&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ethertype</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> payload</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> frame</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="sending-an-ethernet-frame">Sending an Ethernet Frame<a href="#sending-an-ethernet-frame" class="hash-link" aria-label="Direct link to Sending an Ethernet Frame" title="Direct link to Sending an Ethernet Frame">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">def</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">send_ethernet_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Convert MAC addresses to binary</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dest_mac_bytes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mac_to_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;destination_mac&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    src_mac_bytes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> mac_to_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;source_mac&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Construct Ethernet header</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ethernet_header </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> dest_mac_bytes </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> src_mac_bytes </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> ethertype_to_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;ethertype&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Construct Payload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    payload_bytes </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token builtin">bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">frame</span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;payload&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Calculate CRC (Placeholder)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    crc </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> calculate_crc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">ethernet_header </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> payload_bytes</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Final Frame</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    final_frame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> ethernet_header </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> payload_bytes </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> crc</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">to_bytes</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">4</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;big&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Send over Ethernet Interface</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ethernet_interface</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">final_frame</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="example-usage">Example Usage<a href="#example-usage" class="hash-link" aria-label="Direct link to Example Usage" title="Direct link to Example Usage">​</a></h3>
<div class="language-python codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-python codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic"># Define Addresses</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">source_mac </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;00:1A:2B:3C:4D:5E&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">destination_mac </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;5E:4D:3C:2B:1A:00&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ethertype </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0x88F7</span><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic"># Custom UDS Protocol</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Send Vehicle Identification Request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">send_vehicle_identification_request</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">source_address</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0x14</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> target_address</span><span class="token operator" style="color:#393A34">=</span><span class="token number" style="color:#36acaa">0x01</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic"># Receive and Handle Diagnostic Message Response</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">received_frame </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> receive_ethernet_frame</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">handle_diagnostic_message_response</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">received_frame</span><span class="token punctuation" style="color:#393A34">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In this pseudocode:</p>
<ul>
<li><strong>send_vehicle_identification_request:</strong> Constructs and sends a Vehicle Identification Request frame.</li>
<li><strong>handle_diagnostic_message_response:</strong> Parses and processes received Diagnostic Message frames.</li>
<li><strong>construct_ethernet_frame:</strong> Builds the Ethernet frame with specified parameters.</li>
<li><strong>send_ethernet_frame:</strong> Sends the constructed Ethernet frame over the network.</li>
<li><strong>Example Usage:</strong> Demonstrates sending a request and handling the corresponding response.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="timing-and-performance-considerations">Timing and Performance Considerations<a href="#timing-and-performance-considerations" class="hash-link" aria-label="Direct link to Timing and Performance Considerations" title="Direct link to Timing and Performance Considerations">​</a></h2>
<p>Leveraging Ethernet for UDS communication introduces enhanced performance capabilities compared to traditional CAN-based diagnostics. However, several timing and performance factors must be carefully managed to ensure efficient and reliable data transmission.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="high-speed-data-transfer">High-Speed Data Transfer<a href="#high-speed-data-transfer" class="hash-link" aria-label="Direct link to High-Speed Data Transfer" title="Direct link to High-Speed Data Transfer">​</a></h3>
<p>Ethernet supports higher data transfer rates (ranging from 100 Mbps to 1 Gbps and beyond) compared to CAN (typically 500 kbps to 1 Mbps). This increased bandwidth facilitates faster diagnostic operations, especially when handling large datasets or performing over-the-air updates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="latency-and-synchronization">Latency and Synchronization<a href="#latency-and-synchronization" class="hash-link" aria-label="Direct link to Latency and Synchronization" title="Direct link to Latency and Synchronization">​</a></h3>
<ul>
<li><strong>Low Latency:</strong> Ethernet&#x27;s high-speed transmission reduces latency, enabling real-time diagnostic feedback and quicker response times.</li>
<li><strong>Synchronization:</strong> Precise synchronization mechanisms ensure that diagnostic messages are transmitted and received accurately, maintaining data integrity across the network.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flow-control-and-congestion-management">Flow Control and Congestion Management<a href="#flow-control-and-congestion-management" class="hash-link" aria-label="Direct link to Flow Control and Congestion Management" title="Direct link to Flow Control and Congestion Management">​</a></h3>
<p>Effective flow control mechanisms are essential to manage data transmission rates and prevent network congestion:</p>
<ul>
<li><strong>TCP Flow Control:</strong> Utilizes built-in mechanisms like window sizing and acknowledgment to manage data flow.</li>
<li><strong>UDP Flow Control (Custom Implementations):</strong> May require application-level flow control to handle potential packet loss or out-of-order delivery.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="quality-of-service-qos">Quality of Service (QoS)<a href="#quality-of-service-qos" class="hash-link" aria-label="Direct link to Quality of Service (QoS)" title="Direct link to Quality of Service (QoS)">​</a></h3>
<p>Implementing QoS policies ensures that diagnostic traffic is prioritized appropriately, maintaining consistent performance even under heavy network load:</p>
<ul>
<li><strong>Traffic Prioritization:</strong> Assign higher priority to critical diagnostic messages to ensure timely delivery.</li>
<li><strong>Bandwidth Allocation:</strong> Allocate sufficient bandwidth for diagnostic operations to prevent interference with other network services.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-considerations">Security Considerations<a href="#security-considerations" class="hash-link" aria-label="Direct link to Security Considerations" title="Direct link to Security Considerations">​</a></h2>
<p>Security is paramount in UDS over Ethernet to protect against unauthorized access and ensure the integrity of diagnostic operations.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-and-authorization">Authentication and Authorization<a href="#authentication-and-authorization" class="hash-link" aria-label="Direct link to Authentication and Authorization" title="Direct link to Authentication and Authorization">​</a></h3>
<ul>
<li><strong>Secure Session Establishment:</strong> Implement authentication mechanisms to verify the identity of diagnostic tools before granting access to ECUs.</li>
<li><strong>Role-Based Access Control (RBAC):</strong> Restrict diagnostic services based on user roles and permissions, ensuring that only authorized personnel can perform sensitive operations.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="encryption">Encryption<a href="#encryption" class="hash-link" aria-label="Direct link to Encryption" title="Direct link to Encryption">​</a></h3>
<ul>
<li><strong>Data Encryption:</strong> Encrypt diagnostic messages to prevent interception and tampering by malicious actors.</li>
<li><strong>Protocol-Level Security:</strong> Utilize secure protocols (e.g., TLS) to encrypt data transmission channels, enhancing overall communication security.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="intrusion-detection-and-prevention">Intrusion Detection and Prevention<a href="#intrusion-detection-and-prevention" class="hash-link" aria-label="Direct link to Intrusion Detection and Prevention" title="Direct link to Intrusion Detection and Prevention">​</a></h3>
<ul>
<li><strong>Anomaly Detection:</strong> Monitor network traffic for unusual patterns that may indicate attempted breaches or unauthorized access.</li>
<li><strong>Access Control Lists (ACLs):</strong> Define and enforce ACLs to limit access to diagnostic services based on predefined security policies.</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">​</a></h2>
<p>UDS over Ethernet represents a significant advancement in automotive diagnostics, offering high-speed, flexible, and robust communication capabilities essential for modern vehicle systems. By integrating seamlessly within the AUTOSAR architecture and leveraging Ethernet&#x27;s performance advantages, UDS over Ethernet facilitates efficient diagnostic operations, over-the-air updates, and real-time vehicle control. Advanced considerations in message framing, payload handling, timing, performance, and security ensure that UDS over Ethernet meets the demanding requirements of contemporary automotive applications.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/OTA/07_target-device/04_doip.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/Vehicle-Network-Standards/docs/OTA/target-device/uds-can"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">UDS over CAN</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/Vehicle-Network-Standards/docs/OTA/target-device/doip-external"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">DoIP - Connection to External Tester</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#autosar-architecture-integration" class="table-of-contents__link toc-highlight">AUTOSAR Architecture Integration</a><ul><li><a href="#component-placement" class="table-of-contents__link toc-highlight">Component Placement</a></li><li><a href="#integration-overview" class="table-of-contents__link toc-highlight">Integration Overview</a></li></ul></li><li><a href="#connection-establishment" class="table-of-contents__link toc-highlight">Connection Establishment</a><ul><li><a href="#protocols-udp-and-tcp" class="table-of-contents__link toc-highlight">Protocols: UDP and TCP</a></li><li><a href="#connection-establishment-steps" class="table-of-contents__link toc-highlight">Connection Establishment Steps</a></li><li><a href="#example-connection-sequence" class="table-of-contents__link toc-highlight">Example Connection Sequence</a></li></ul></li><li><a href="#ethernet-frame-structure-for-uds" class="table-of-contents__link toc-highlight">Ethernet Frame Structure for UDS</a><ul><li><a href="#standard-ethernet-frame-components" class="table-of-contents__link toc-highlight">Standard Ethernet Frame Components</a></li><li><a href="#enhanced-uds-frame-structure" class="table-of-contents__link toc-highlight">Enhanced UDS Frame Structure</a></li><li><a href="#type-field-composition" class="table-of-contents__link toc-highlight">Type Field Composition</a></li><li><a href="#detailed-type-field-breakdown" class="table-of-contents__link toc-highlight">Detailed Type Field Breakdown</a></li></ul></li><li><a href="#payload-type-specifications" class="table-of-contents__link toc-highlight">Payload Type Specifications</a><ul><li><a href="#common-payload-types" class="table-of-contents__link toc-highlight">Common Payload Types</a></li><li><a href="#payload-type-details" class="table-of-contents__link toc-highlight">Payload Type Details</a></li><li><a href="#example-payload-type-identification" class="table-of-contents__link toc-highlight">Example Payload Type Identification</a></li></ul></li><li><a href="#message-framing-and-structure" class="table-of-contents__link toc-highlight">Message Framing and Structure</a><ul><li><a href="#ethernet-frame-example" class="table-of-contents__link toc-highlight">Ethernet Frame Example</a></li><li><a href="#type-field-example" class="table-of-contents__link toc-highlight">Type Field Example</a></li><li><a href="#diagnostic-message-example" class="table-of-contents__link toc-highlight">Diagnostic Message Example</a></li></ul></li><li><a href="#payload-type-handling" class="table-of-contents__link toc-highlight">Payload Type Handling</a><ul><li><a href="#example-vehicle-identification-request-0x0001" class="table-of-contents__link toc-highlight">Example: Vehicle Identification Request (<code>0x0001</code>)</a></li><li><a href="#example-response-message" class="table-of-contents__link toc-highlight">Example Response Message</a></li></ul></li><li><a href="#practical-example-diagnostic-session-handling" class="table-of-contents__link toc-highlight">Practical Example: Diagnostic Session Handling</a><ul><li><a href="#frame-capture-analysis" class="table-of-contents__link toc-highlight">Frame Capture Analysis</a></li><li><a href="#message-interpretation" class="table-of-contents__link toc-highlight">Message Interpretation</a></li><li><a href="#extended-session-diagnostic-response" class="table-of-contents__link toc-highlight">Extended Session Diagnostic Response</a></li></ul></li><li><a href="#code-snippets" class="table-of-contents__link toc-highlight">Code Snippets</a><ul><li><a href="#sending-a-vehicle-identification-request" class="table-of-contents__link toc-highlight">Sending a Vehicle Identification Request</a></li><li><a href="#handling-a-diagnostic-message-response" class="table-of-contents__link toc-highlight">Handling a Diagnostic Message Response</a></li><li><a href="#constructing-an-ethernet-frame" class="table-of-contents__link toc-highlight">Constructing an Ethernet Frame</a></li><li><a href="#sending-an-ethernet-frame" class="table-of-contents__link toc-highlight">Sending an Ethernet Frame</a></li><li><a href="#example-usage" class="table-of-contents__link toc-highlight">Example Usage</a></li></ul></li><li><a href="#timing-and-performance-considerations" class="table-of-contents__link toc-highlight">Timing and Performance Considerations</a><ul><li><a href="#high-speed-data-transfer" class="table-of-contents__link toc-highlight">High-Speed Data Transfer</a></li><li><a href="#latency-and-synchronization" class="table-of-contents__link toc-highlight">Latency and Synchronization</a></li><li><a href="#flow-control-and-congestion-management" class="table-of-contents__link toc-highlight">Flow Control and Congestion Management</a></li><li><a href="#quality-of-service-qos" class="table-of-contents__link toc-highlight">Quality of Service (QoS)</a></li></ul></li><li><a href="#security-considerations" class="table-of-contents__link toc-highlight">Security Considerations</a><ul><li><a href="#authentication-and-authorization" class="table-of-contents__link toc-highlight">Authentication and Authorization</a></li><li><a href="#encryption" class="table-of-contents__link toc-highlight">Encryption</a></li><li><a href="#intrusion-detection-and-prevention" class="table-of-contents__link toc-highlight">Intrusion Detection and Prevention</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Protocols</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/intro">CAN</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/intro">LIN</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/intro">FlexRay</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/intro">Ethernet</a></li></ul></div><div class="col footer__col"><div class="footer__title">Diagnostic</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/UDS/Getting-Started">UDS</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/UDS/Getting-Started">DoIP</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/UDS/Getting-Started">SOVD</a></li></ul></div><div class="col footer__col"><div class="footer__title">Architecture</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/AUTOSAR/Getting-Started">AUTOSAR</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/SOVA/Getting-Started">SOVA</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/SOME-IP/Getting-Started">SOME/IP</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/SOURCES/info">Sources</a></li><li class="footer__item"><a class="footer__link-item" href="/Vehicle-Network-Standards/docs/Glossary/Getting-Started">Glossary</a></li><li class="footer__item"><a href="https://github.com/CagriCatik/Vehicle-Network-Standards" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2025 Vehicle Network Standards.</div></div></div></footer></div>
</body>
</html>